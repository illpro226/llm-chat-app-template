<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Extremes AI Chat · Axiom|Spectre Theme</title>
    <style>
      /* =============================
         A|S Neon Dark Theme — Michael
         Palette: charcoal + neon green + violet
         ============================= */
      :root {
        --bg: #06050f;               /* deep charcoal */
        --panel: #0b0a14;            /* panel background */
        --panel-2: #0f0d1a;          /* subtle contrast */
        --glow: #39ff14;             /* neon lime */
        --glow-soft: rgba(57, 255, 20, 0.35);
        --violet: #a855f7;           /* neon violet */
        --magenta: #ff00ff;          /* accent hover */
        --text: #e5e7eb;             /* primary text */
        --muted: #9aa4b2;            /* muted text */
        --border: rgba(168, 85, 247, 0.35);
        --ring: rgba(57, 255, 20, 0.2);
        --shadow: 0 0 0.5rem rgba(168, 85, 247, 0.25), 0 0 1.25rem rgba(57, 255, 20, 0.25);

        /* message bubbles */
        --user-bubble: linear-gradient(135deg, rgba(57,255,20,0.22), rgba(168,85,247,0.18));
        --assistant-bubble: linear-gradient(135deg, rgba(168,85,247,0.22), rgba(57,255,20,0.12));
      }

      * { box-sizing: border-box; margin: 0; padding: 0; }
      html, body { height: 100%; }

      body {
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
        line-height: 1.6;
        color: var(--text);
        background: radial-gradient(1200px 600px at 20% -10%, rgba(168,85,247,0.15), transparent 60%),
                    radial-gradient(1000px 800px at 110% 120%, rgba(57,255,20,0.12), transparent 60%),
                    linear-gradient(180deg, #070610, #06050f 40%, #06050f 60%, #05040c);
        overflow: hidden;
      }

      /* Subtle moving grid / code-rain vibe */
      body::before {
        content: "";
        position: fixed; inset: 0; pointer-events: none; z-index: 0;
        background-image:
          linear-gradient(transparent 95%, rgba(168,85,247,0.15) 96%),
          linear-gradient(90deg, transparent 95%, rgba(57,255,20,0.12) 96%);
        background-size: 100% 24px, 24px 100%;
        mix-blend-mode: screen;
        animation: drift 18s linear infinite;
        opacity: .25;
      }
      @keyframes drift { to { background-position: 0 24px, 24px 0; } }

      /* Outer page frame */
      .frame {
        position: relative; z-index: 1;
        max-width: 1040px; height: 100%; margin: 0 auto; padding: 20px;
        display: grid; grid-template-rows: auto 1fr auto; gap: 16px;
      }

      header {
        position: relative;
        border: 1px solid var(--border);
        border-radius: 16px;
        padding: 18px 20px;
        background: linear-gradient(180deg, rgba(168,85,247,0.06), rgba(57,255,20,0.04));
        box-shadow: var(--shadow);
      }
      header h1 {
        font-size: clamp(18px, 2.2vw, 28px);
        letter-spacing: 0.6px;
        font-weight: 700;
        text-transform: uppercase;
        background: linear-gradient(90deg, var(--text), var(--violet), var(--glow));
        -webkit-background-clip: text; background-clip: text; color: transparent;
      }
      header p { color: var(--muted); font-size: 0.95rem; }

      /* Chat container with animated neon border */
      .chat-wrap {
        position: relative; border-radius: 18px; overflow: hidden;
        background: conic-gradient(from 220deg at 50% 50%, rgba(168,85,247,0.12), rgba(57,255,20,0.12), rgba(168,85,247,0.12));
        padding: 1px; /* border illusion */
        box-shadow: 0 0 0 1px rgba(168,85,247,0.25) inset, 0 0 32px rgba(57,255,20,0.08) inset;
      }
      .chat {
        display: grid; grid-template-rows: 1fr auto; gap: 0;
        height: min(76vh, calc(100vh - 220px)); min-height: 480px;
        background: linear-gradient(180deg, var(--panel), var(--panel-2));
        border-radius: 17px;
      }

      .chat-messages {
        overflow-y: auto; padding: 18px 18px 10px; scroll-behavior: smooth;
      }
      /* custom scrollbar */
      .chat-messages::-webkit-scrollbar { width: 10px; }
      .chat-messages::-webkit-scrollbar-track { background: transparent; }
      .chat-messages::-webkit-scrollbar-thumb {
        background: linear-gradient(var(--violet), var(--glow)); border-radius: 999px; opacity: .6;
      }

      .message { max-width: 78%; margin: 0 0 14px; padding: 12px 14px; border-radius: 14px; position: relative; }
      .message p { color: var(--text); }

      .assistant { background: var(--assistant-bubble); border: 1px solid rgba(168,85,247,0.25); box-shadow: 0 8px 24px rgba(168,85,247,0.12); }
      .user { margin-left: auto; background: var(--user-bubble); border: 1px solid rgba(57,255,20,0.35); box-shadow: 0 8px 24px rgba(57,255,20,0.12); }

      .message .meta { font-size: 0.75rem; color: var(--muted); margin-top: 6px; }

      /* input row */
      .input-row { display: grid; grid-template-columns: 1fr auto; gap: 10px; padding: 12px; border-top: 1px solid rgba(168,85,247,0.25); background: rgba(6,5,15,0.6); backdrop-filter: blur(6px); }

      textarea {
        resize: vertical; min-height: 44px; max-height: 180px; width: 100%;
        padding: 12px 14px; border-radius: 12px; border: 1px solid rgba(168,85,247,0.35);
        background: #0c0a16; color: var(--text); font-family: inherit; outline: none;
        transition: box-shadow .2s, border-color .2s;
      }
      textarea:focus { border-color: var(--violet); box-shadow: 0 0 0 4px var(--ring); }
      textarea::placeholder { color: #7b8190; }

      .btn {
        appearance: none; border: 0; border-radius: 12px; padding: 0 18px; font-weight: 600; letter-spacing: 0.3px;
        color: #051006; background: linear-gradient(180deg, var(--glow), #9bff7b);
        box-shadow: 0 8px 20px rgba(57,255,20,0.18), inset 0 -6px 16px rgba(0,0,0,0.25);
        cursor: pointer; transition: transform .06s ease, filter .2s ease;
      }
      .btn:hover { filter: brightness(1.08); }
      .btn:active { transform: translateY(1px); }
      .btn:disabled { filter: saturate(0) brightness(0.6); cursor: not-allowed; }

      .typing { display: none; padding: 0 18px 10px; color: var(--muted); font-style: italic; }
      .typing.visible { display: block; }
      .dots:after {
        content: "…"; animation: ellipses 1.2s steps(4, end) infinite;
      }
      @keyframes ellipses { 0% { content: ""; } 25% { content: "."; } 50% { content: ".."; } 75% { content: "..."; } 100% { content: ""; } }

      footer { text-align: center; color: var(--muted); font-size: .9rem; padding: 6px 0 10px; }

      /* A|S watermark — subtle, tasteful, always-present */
      .watermark {
        position: fixed; right: 20px; bottom: 16px; z-index: 0; pointer-events: none;
        font-weight: 700; letter-spacing: .12em; text-transform: uppercase; font-size: 10px;
        color: rgba(57,255,20,0.35);
        text-shadow: 0 0 12px rgba(57,255,20,0.25), 0 0 22px rgba(168,85,247,0.2);
        opacity: .22; user-select: none;
      }
      .watermark .sig { opacity: .9; }
      .watermark .sig::after { content: "  •  Axiom|Spectre"; color: rgba(168,85,247,0.7); font-weight: 600; }

      /* Reduce motion for users who prefer it */
      @media (prefers-reduced-motion: reduce) {
        body::before, .btn, header, .chat-wrap { animation: none !important; }
      }
          /* ===== Env badge & per-env distinctions ===== */
      .env-badge{
        position:absolute; top:10px; right:12px; z-index:2;
        padding:4px 10px; border-radius:999px; font:600 11px/1.6 ui-sans-serif;
        letter-spacing:.08em; text-transform:uppercase; backdrop-filter:blur(6px);
        border:1px solid rgba(255,255,255,.12); user-select:none;
      }
      body[data-env="prod"] .env-badge{ color:#051006; background:linear-gradient(180deg,#39ff14,#9bff7b); }
      body[data-env="dev"]  .env-badge{ color:#13041a; background:linear-gradient(180deg,#a855f7,#ff9dff); }
      body[data-env="lab"]  .env-badge{ color:#0b0f17; background:linear-gradient(180deg,#00e5ff,#7af0ff); }

      /* Palette swaps (keeps your scheme but makes instances distinct) */
      body[data-env="prod"]{ --glow:#39ff14; --violet:#a855f7; }
      body[data-env="dev"] { --glow:#ff00ff; --violet:#c084fc; }
      body[data-env="lab"] { --glow:#00e5ff; --violet:#7c3aed; }

      /* Message chrome cues per env */
      body[data-env="prod"] .assistant{ border-color:rgba(57,255,20,.35); }
      body[data-env="dev"]  .assistant{ border-color:rgba(255,0,255,.35); }
      body[data-env="lab"]  .assistant{ border-color:rgba(0,229,255,.35); }

      /* Watermark label per env */
      body[data-env="prod"] .watermark .sig::after{ content:"  •  Axiom|Spectre • PROD"; }
      body[data-env="dev"]  .watermark .sig::after{ content:"  •  Axiom|Spectre • DEV"; }
      body[data-env="lab"]  .watermark .sig::after{ content:"  •  Axiom|Spectre • LAB"; }
    </style>
  </head>
  <body data-env="dev">
    <div class="frame">
      <header>
        <div class="env-badge">DEV</div>
        <h1>Data Extremes AI Chat</h1>
      </header>

      <div class="chat-wrap">
        <div class="chat">
          <div id="chat-messages" class="chat-messages">
            <div class="message assistant">
              <p>Hey Michael — A|S online. How can I help today?</p>
              <div class="meta">assistant · boot sequence complete</div>
            </div>
          </div>

          <div class="typing" id="typing-indicator"><span class="dots">AI is thinking</span></div>

          <div class="input-row">
            <textarea id="user-input" placeholder="Type your message…" rows="1" autofocus></textarea>
            <button id="send-button" class="btn">Send</button>
          </div>
        </div>
      </div>

      <footer>
        <p>Powered by Cloudflare Workers AI — Neon Dark Edition</p>
        <p>Data Extremes AI Chat · <span style="color: var(--violet); font-weight:600;">A|S</span> remix · © 2025</p>
      </footer>
    </div>

    <!-- A|S watermark signature -->
    <div class="watermark"><span class="sig">A|S</span></div>

    <!-- Environment controller (favicon + URL param) -->
    <script>
      (function(){
        const params = new URLSearchParams(location.search);
        const envParam = (params.get('env')||'').toLowerCase();
        const allowed = ['prod','dev','lab'];
        const env = allowed.includes(envParam) ? envParam : document.body.getAttribute('data-env') || 'dev';
        document.body.setAttribute('data-env', env);
        // Badge text
        const badge = document.querySelector('.env-badge');
        if (badge) badge.textContent = env.toUpperCase();
        // Title suffix
        document.title = `Data Extremes AI Chat · ${env.toUpperCase()}`;
        // Favicon color per env
        const colors = { prod:'#39ff14', dev:'#ff00ff', lab:'#00e5ff' };
        const svg = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'>
          <rect width='64' height='64' rx='12' fill='black'/>
          <text x='32' y='40' font-size='34' text-anchor='middle' font-family='Arial' fill='${colors[env]}'>AΣ</text>
        </svg>`);
        let link = document.querySelector('#favicon');
        if(!link){ link = document.createElement('link'); link.id='favicon'; link.rel='icon'; document.head.appendChild(link); }
        link.href = `data:image/svg+xml,${svg}`;
      })();
    </script>

    <!-- Chat app script -->
    <script src="chat.js"></script>
  </body>
</html>
